<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index Page</title>
    <!-- <style>
        #fullName {
            border: 1px solid blue;
        }
    </style> -->

</head>

<body>
    <!--     
    1-Make a registration form (you can re-use the registration form you did before) as the following (Use HTML 5 new input types and validation attributes): 
    
    a.Form fields: 
        Full Name (Required)
        Email (Required, input type: email)
        City (Drop-down list filled with some cities)
        Password
        Repeat password.
        “I accept the terms and conditions” checkbox.
        Register button, which redirects to another page saying: “Thank you, Full Name for registering in our website”.
    b.Make full name text has default text “Enter your Name:” [use placeholder attribute].
    c.When the user focus in full name text, show blue border for the input (use element.
        style.border=”solid 1px blue”), and remove the border when the input loses the focus.
    d.After user finish writing his full name and leaves the text box (lost focus),
        if full name wasn't in correct format (not empty string and more than 3 letters),
        show text next to textbox saying “invalid name”, and focus the full name textbox,
        and select all text on it, else if full name was in correct format hide the text next to textbox.
    e.For Password and repeat password fields, when the user leaves the repeat password field,
      we need to validate that they’re required, and they’re identical (The same), 
        and if they’re not the same show text besides it saying “password and repeat password should be the same”;
        remove the validation message when the user enters it correctly.
    f.Change the background color of the text input when it’s not valid to: gray, and to white when it’s valid.
    g.For the Email, use HTML “ Required” attribute, and input type email.
        You’ll remark that HTML validation will prevent you from submitting the form unless it’s valid, right?
        But for the other custom validation of the name and password & repeat password, will not prevent the form for submitting 
        and you can submit the form even if they’re not valid, why? 
-->
    <form action="thankyou.html" method="get">
        <label for="fullName">Full Name:</label>
        <input type="text" id="fullName" name="fullName" placeholder="Enter your Name:">
        <span id="nameError" class="error">invalid name</span>
        <br><br>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required><br><br>

        <label for="city">City:</label>

        <!-- remmeber that select tag for make Drop-down list
        and we can give it an <optgroup>to group some data together -->
        <select id="city" name="city">
            <option value="newyork">New York</option>
            <option value="losangeles">Los Angeles</option>
            <option value="chicago">Chicago</option>
            <option value="houston">Houston</option>
            <option value="miami">Miami</option>
        </select><br><br>

        <label for="password">Password:</label>
        <input type="password" id="password" name="password"><br><br>

        <label for="repeatPassword">Repeat Password:</label>
        <input type="password" id="repeatPassword" name="repeatPassword">
        <span id="passError" class="error">password and repeat password should be the same</span><br><br>

        <input type="checkbox" id="terms" name="terms" required>
        <label for="terms">I accept the terms and conditions</label><br><br>

        <button type="submit">Register</button>


    </form>
    <script>

        let fullNameInput = document.getElementById("fullName");
        
        let form = document.querySelector("form");
        
        let nameError = document.getElementById("nameError");
        nameError.style.display = "none"; // hide error message initially
        
        let password = document.getElementById("password");
        let repeatPassword = document.getElementById("repeatPassword");
        
        let passError = document.getElementById("passError");
        passError.style.display = "none"; // hide error message initially

        fullNameInput.onfocus = function () {
            fullNameInput.style.border = "2px solid blue";
        };

        fullNameInput.onblur = function () {
            fullNameInput.style.border = "";
            // d- validate name
            validateName();
        };
            // e- validate password match
            repeatPassword.onblur =function () { validatePassword()};

            function validateName() {
                if (fullNameInput.value.trim() === "" || fullNameInput.value.trim().length <= 3) {
                    nameError.style.display = "inline";
                    fullNameInput.style.backgroundColor = "gray";
                    return false;
                } else {
                    nameError.style.display = "none";
                    fullNameInput.style.backgroundColor = "white";
                    return true;
                }
            }

            function validatePassword() {
                if (password.value === "" || repeatPassword.value === "" || password.value !== repeatPassword.value) {
                    passError.style.display = "inline";
                    password.style.backgroundColor = "gray";
                    repeatPassword.style.backgroundColor = "gray";
                    return false;
                } else {
                    passError.style.display = "none";
                    password.style.backgroundColor = "white";
                    repeatPassword.style.backgroundColor = "white";
                    return true;
                }
            }

            //  Handle submition 
            form.onsubmit = function (event) {
                if (! validateName() || ! validatePassword()) {
                    event.preventDefault(); 
                    alert("Plz correct the validation errors first");
                } else {
                    form.submit();
                }
            };
    </script>
</body>

</html>